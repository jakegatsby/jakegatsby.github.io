<!DOCTYPE html>
<html>
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vuetify/3.6.8/vuetify.min.css" integrity="sha512-zZcBgAmxmQ42Dj5ApDqyIW54A4E9s4Oc6wktdd2Ef0clfDijE4TECIt0cXp9p0EBfdyHBzECg9uMh9GZ9uGryQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="/main.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>

<div id="app">
  <v-app>

      <v-app-bar color="grey-darken-4" density="compact">
        <template v-slot:prepend>
          <v-app-bar-nav-icon></v-app-bar-nav-icon>
        </template>
        <v-app-bar-title><span class="text-h5">26 RCA Museum</span></v-app-bar-title>
      </v-app-bar>

     <v-main v-if="artifact.title">
        <v-container>
          <v-row>
            <v-col cols="12" class="artifact-title text-center text-h4 font-weight-bold my-4">
              {{ artifact.title }}
            </v-col>
          </v-row>
          <v-row>
            <v-col cols="12" class="artifact-title text-center text-h5 font-weight-bold my-4">
              <audio class="audio" controls :src="artifact.audio"></audio>
            </v-col>
          </v-row>

          <v-row>
            <v-col>
                <v-card class="mb-6" variant="outlined" elevation="16">
                  <v-carousel height="auto">
                    <v-carousel-item v-for="image in artifact.images" :src="image" eager cover></v-carousel-item>
                  </v-carousel>
                </v-card>
              </v-col>
          </v-row>
          <v-row>
            <v-col>
              <v-card color="grey-darken-4">
                <v-card-text class="text-h5 artifact-description">
                  {{ artifact.description }}
                </v-card-text>
              </v-card>
            </v-col>
          </v-row>
       </v-container>
     </v-main>
  </v-app>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.4.27/vue.global.prod.min.js" integrity="sha512-S6p3JDeFUUAPxDGXtffsMdW5aozN1Au8R+6Llg/3406JfPGc5618IXEJANXF3x1Ev5EGef+7z+sLbqYbIC6hDQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vuetify/3.6.8/vuetify.min.js" integrity="sha512-NytlC2r8yMLKVYSG6u5CyQFTPNskL8cnTPIlHZsu9GgtmhDokT/LeKF1stxkG59jQLLUhrDQ0GtSYaDGAc6YUg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.2/axios.min.js" integrity="sha512-JSCFHhKDilTRRXe9ak/FJ28dcpOJxzQaCd3Xg8MyF6XFjODhy/YMCM8HW0TFDckNHWUewW+kfvhin43hKtJxAw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

    const { createApp, ref } = Vue
    const { createVuetify } = Vuetify
    const vuetify = createVuetify({
      theme: {
        defaultTheme: 'dark'
      }
    })

  createApp({
    data() {
      return {
        artifact: {
          id: null,
          title: null,
          images: [],
          description: null,
          audio: null
        }
      }
    },
    computed: {},
    methods: {},
    mounted() {
      let queryString = window.location.search;
      let urlParams = new URLSearchParams(queryString);
      if (urlParams.has('id')) {
        this.artifact.id = urlParams.get('id');
        axios.get(`/artifacts/${this.artifact.id}/data.json?nocache=${Math.floor(Math.random() * 1000000)}`)
          .then(response => {
            this.artifact.title = response.data.title;
            this.artifact.images = response.data.images;
            this.artifact.description = response.data.description;
            this.artifact.audio = `/artifacts/${this.artifact.id}/audio.mp3`
          }
        );
      }
    }
  }).use(vuetify).mount('#app')
</script>

</body>
</html>
